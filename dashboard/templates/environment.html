{% extends "layout.html" %}
{% set title = 'Environment' -%}
{% set active_page = 'environment' -%}
{% block body %}

<div class="row">
  <div class="dashhead-titles col-md-8 col-sm-8 col-xs-7">
    <h2 class="dashhead-title">{{ title|safe }}</h2>
    <h2 id="headerdesc" class="dashhead-subtitle">Loading...</h2>
  </div>
  <div class="col-md-4 col-sm-4 col-xs-5">
    <div class="input-group">
      <div class="input-group-btn">
        <button id="prev-date" class="btn btn-default-outline"><span class="icon icon-chevron-left"></span></button>
      </div>
      <input id="datepicker" type="text" placeholder="Live Data" class="form-control" data-provide="datepicker" data-date-format="yyyy-mm-dd" data-date-autoclose="true" data-date-clear-btn="true" data-date-start-date="2016-09-14" data-date-end-date="0d" data-date-disable-touch-keyboard="true">
      <div class="input-group-btn">
        <button id="next-date" class="btn btn-default-outline"><span class="icon icon-chevron-right"></span></button>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-md-6" style="padding: 0; margin: 0">
    <div id="temperature-container" class="plot-container">
      <div id="temperature-plot" data-linkedplots='["humidity-plot", "dew-plot", "skytemp-plot", "pressure-plot"]' class="weather-plot" data-series='["rinttemp", "ninttemp", "ginttemp", "vexttemp", "gexttemp", "swtemp"]' data-axislabel='Temp. (&deg;C)' data-labelfudge="-7" data-labelunits='&deg;C' data-hidetime></div>
    </div>
    <div id="humidity-container" class="plot-container">
      <div id="humidity-plot" data-linkedplots='["temperature-plot", "dew-plot", "skytemp-plot", "pressure-plot"]' class="weather-plot" data-series='["rinthumid", "ninthumid", "ginthumid", "vexthumid", "gexthumid", "swhumid"]' data-sidesensor="humidity-container" data-labelcontainer="humidity-labels" data-axislabel='Humidity (%)' data-min="0" data-max="125" data-labelfudge="-7" data-labelunits='%' data-hidetime></div>
    </div>
    <div id="dew-container" class="plot-container">
      <div id="dew-plot" data-linkedplots='["temperature-plot", "humidity-plot", "skytemp-plot", "pressure-plot"]' class="weather-plot" data-sidesensor="dew-container" data-series='["vdewdelta", "gdewdelta", "swdewdelta"]' data-axislabel='T. &gt; Dew Pt. (&deg;C)' data-min="0" data-labelfudge="-7" data-labelunits='&deg;C' data-hidetime></div>
    </div>
    <div id="skytemp-container" class="plot-container">
      <div id="skytemp-plot" data-linkedplots='["temperature-plot", "humidity-plot", "dew-plot", "pressure-plot"]' class="weather-plot" data-series='["swskytemp"]' data-axislabel='Sky Temp. (&deg;C)' data-labelunits='&deg;C' data-min="-50" data-max="0" data-labelfudge="-7" data-hidetime></div>
    </div>
    <div id="pressure-container" class="plot-container">
      <div id="pressure-plot" data-linkedplots='["temperature-plot", "humidity-plot", "dew-plot", "skytemp-plot"]' class="weather-plot" data-series='["vpressure", "gpressure"]' data-sidesensor="pressure-container" data-axislabel='Pressure (hPa)' data-min="745" data-max="790" data-labelfudge="-7" data-labelunits='&nbsp;hPa' data-ydecimals="0"></div>
    </div>
  </div>
  <div class="col-md-6" style="padding: 0; margin: 0" id="right-container">
    <div id="wind-container" class="plot-container">
      <div id="wind-plot" class="weather-plot wind-plot" data-sidesensor="right-container" data-series='["vwindspeed", "gwindspeed", "swwindspeed"]' data-series='["vwinddir", "gwinddir", "swwinddir"]' data-axislabel='Wind Speed (km/h)' data-labelunits='&nbsp;km/h' data-hidetime></div>
    </div>
    <div id="raindetector-container" class="plot-container">
      <div id="rainboards-plot" data-linkedplots='["accumrain-plot", "rainintensity-plot"]' class="weather-plot" data-series='["rdboards"]' data-sidesensor="right-container" data-axislabel="Rain Detectors" data-labelfudge="-7" data-min="0" data-max="6" data-labelunits='&nbsp;boards' data-hidetime data-ydecimals="0"></div>
    </div>
    <div id="rainintensity-container" class="plot-container">
      <div id="rainintensity-plot" data-linkedplots='["rainboards-plot", "accumrain-plot"]' class="weather-plot" data-series='["vrainint", "grainint"]' data-sidesensor="right-container" data-axislabel="Rain (mm/min)" data-labelunits='&nbsp;mm/min' data-labelfudge="-7" data-min="0" data-hidetime></div>
    </div>
    <div id="accumrain-container" class="plot-container">
      <div id="accumrain-plot" data-linkedplots='["rainboards-plot", "rainintensity-plot"]' class="weather-plot" data-series='["vrain", "grain"]' data-sidesensor="right-container" data-axislabel="Total Rain (mm)" data-labelunits='&nbsp;mm' data-labelfudge="-7" data-min="0"></div>
    </div>
  </div>
</div>
<script src="{{ url_for('static', filename='jquery.flot.min.js') }}"></script>
<script src="{{ url_for('static', filename='jquery.flot.resize.min.js') }}"></script>
<script src="{{ url_for('static', filename='jquery.flot.time.min.js') }}"></script>
<script src="{{ url_for('static', filename='jquery.flot.axislabels.js') }}"></script>
<script src="{{ url_for('static', filename='jquery.flot.crosshair.min.js') }}"></script>
<script src="{{ url_for('static', filename='environment.js') }}"></script>
<script>
  var dataURL = '{{ url_for('environment_data') }}';
  $(document).ready(setup);
</script>
{% endblock %}

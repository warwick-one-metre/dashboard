{% extends "layout.html" %}
{% set title = 'Weather Archive' -%}
{% set active_page = 'weather' -%}
{% block body %}
<style>

#content {
  width: 880px;
  margin: 0 auto;
  padding: 10px;
}

.plot-container {
  height: 155px;
  padding: 0;
  margin: 0;
}

.weather-plot {
  width: 100%;
  height: 100%;
  font-size: 14px;
  line-height: 1.2em;
}

.wind-labels {
  position:absolute;
  font-size:smaller;
  width:20px;
  height:20px
}

.xAxis, .yAxis { color: #fff; }
.legendLabel { width: 55px; height: 17px;}
.legendColorBox { display: none }
.axisLabels { text-align: center; }

#rdboards-label td.legendLabel, #vrain-label td.legendLabel { width: 145px; }
#humidity-container, #temperature-container, #dew-container, #pressure-container { height: 110px; }
#dew-container, #humidity-container, #skytemp-container, #pressure-container, #raindetector-container, #vaisala-rain-container { margin-top: -5px; }
#pressure-container { margin-top: -20px; }
#wind-container { height: 230px; }
#raindetector-container { height: 63px; }
#vaisala-rain-container { height: 97px; }
#main-ups-container { height: 60px; margin-top: 0px; }
#dome-ups-container { height: 95px; margin-top: -7px; }
#network-container { height: 147px; margin-top: 0px; }

.datepicker tfoot tr th {
  text-align: center;
  border-radius: 3px;
}

.datepicker table tr td.day:hover,
.datepicker-months table tr td span:hover,
.datepicker-years table tr td span:hover,
.datepicker thead tr:first-child th:hover,
.datepicker tfoot tr th:hover {
  background: #4d5364;
  color:#fff;
}

.datepicker table tr td.disabled:hover {
  background: #fff;
  color: #cfd2da;
}

</style>
<div class="dashhead m-b">
  <div class="dashhead-titles">
    <h2 class="dashhead-title">{{ title|safe }}</h2>
    <h2 id="headerdesc" class="dashhead-subtitle">Loading...</h2>
  </div>
  <div class="btn-toolbar dashhead-toolbar">
    <div class="btn-toolbar-item input-with-icon">
      <input id="datepicker" type="text" placeholder="Live Data" class="form-control" data-provide="datepicker" data-date-format="yyyy-mm-dd" data-date-autoclose="true" data-date-clear-btn="true" data-date-start-date="2016-09-14" data-date-end-date="0d" data-date-disable-touch-keyboard="true">
      <span class="icon icon-calendar"></span>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-md-6" style="padding: 0; margin: 0">
    <div id="temperature-container" class="plot-container">
      <div id="temperature-plot" data-linkedplots='["humidity-plot", "dew-plot", "skytemp-plot"]' class="weather-plot" data-series='["rinttemp", "ninttemp", "ginttemp", "vexttemp", "swtemp"]' data-axislabel='Temp. (&deg;C)' data-labelfudge="-7" data-labelunits='&deg;C' data-hidetime></div>
    </div>
    <div id="humidity-container" class="plot-container">
      <div id="humidity-plot" data-linkedplots='["temperature-plot", "dew-plot", "skytemp-plot"]' class="weather-plot" data-series='["rinthumid", "ninthumid", "ginthumid", "vexthumid", "swhumid"]' data-sidesensor="humidity-container" data-labelcontainer="humidity-labels" data-axislabel='Humidity (%)' data-labelfudge="-7" data-labelunits='%' data-hidetime></div>
    </div>
    <div id="dew-container" class="plot-container">
      <div id="dew-plot" data-linkedplots='["temperature-plot", "humidity-plot", "skytemp-plot"]' class="weather-plot" data-sidesensor="dew-container" data-series='["vdewdelta", "swdewdelta"]' data-axislabel='T. &gt; Dew Pt. (&deg;C)' data-labelfudge="-7" data-labelunits='&deg;C' data-hidetime></div>
    </div>
    <div id="skytemp-container" class="plot-container">
      <div id="skytemp-plot" data-linkedplots='["temperature-plot", "humidity-plot", "dew-plot"]' class="weather-plot" data-series='["swskytemp"]' data-axislabel='Sky Temp. (&deg;C)' data-labelunits='&deg;C' data-labelfudge="-7"></div>
    </div>
  </div>

  <div class="col-md-6" style="padding: 0; margin: 0" id="right-container">
    <div id="wind-container" class="plot-container">
      <div id="wind-plot" class="weather-plot wind-plot" data-sidesensor="right-container" data-series='["vwindspeed", "swwindspeed"]' data-series='["vwinddir", "swwinddir"]' data-axislabel='Wind Speed (km/h)' data-labelunits='&nbsp;km/h' data-hidetime></div>
    </div>
    <div id="pressure-container" class="plot-container">
      <div id="pressure-plot" data-linkedplots='["rainboards-plot", "vaisalarain-plot"]' class="weather-plot" data-series='["vpressure"]' data-sidesensor="right-container" data-axislabel='Pressure (hPa)' data-labelfudge="-7" data-labelunits='&nbsp;hPa' data-ydecimals="0" data-hidetime></div>
    </div>
    <div id="raindetector-container" class="plot-container">
      <div id="rainboards-plot" data-linkedplots='["pressure-plot", "vaisalarain-plot"]' class="weather-plot" data-series='["rdboards"]' data-sidesensor="right-container" data-axislabel='Rain Detectors' data-labelfudge="16" data-min="0" data-max="6" data-labelunits='&nbsp;boards' data-hidetime data-ydecimals="0"></div>
    </div>
    <div id="vaisala-rain-container" class="plot-container">
      <div id="vaisalarain-plot" data-linkedplots='["pressure-plot", "rainboards-plot"]' class="weather-plot" data-series='["vrain"]' data-sidesensor="right-container" data-axislabel="&nbsp;" data-labelunits='&nbsp;mm' data-min="0"></div>
    </div>
  </div>
</div>
<div class="row">
  <div class="col-md-6" style="padding: 0;">
    <div id="main-ups-container" class="plot-container">
      <div id="main-ups-plot" class="weather-plot" data-series='["mupsbat"]' data-axislabel='UPS Battery (%)' data-labelfudge="19" data-min="0" data-max="105" data-labelunits='%' data-hidetime></div>
    </div>
    <div id="dome-ups-container" class="plot-container">
      <div id="dome-ups-plot" class="weather-plot" data-series='["dupsbat"]' data-axislabel="&nbsp;" data-min="0" data-max="105" data-labelunits='%'></div>
    </div>
  </div>
  <div id="network-container" class="col-md-6 plot-container">
    <div class="weather-plot" data-series='["googleping", "ngtsping"]' data-sidesensor="network-container" data-axislabel='Ping (ms)' data-labelfudge="-9" data-labelunits=' ms'></div>
  </div>
</div>
<script src="{{ url_for('static', filename='jquery.flot.min.js') }}"></script>
<script src="{{ url_for('static', filename='jquery.flot.resize.min.js') }}"></script>
<script src="{{ url_for('static', filename='jquery.flot.time.min.js') }}"></script>
<script src="{{ url_for('static', filename='jquery.flot.axislabels.js') }}"></script>
<script src="{{ url_for('static', filename='jquery.flot.crosshair.min.js') }}"></script>
<script src="{{ url_for('static', filename='weather.js') }}"></script>
<script>
  var dataURL = '{{ url_for('weatherdata') }}';
  $(document).ready(setup);
</script>
{% endblock %}
